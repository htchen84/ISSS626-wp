{
  "hash": "10fc1682a102f3dd349858c455b474f8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"In-class_Learning_01\"\nauthor: \"HTC\"\ndate: \"September 8, 2025\"\ndate-modified: \"last-modified\"\nformat:\n  html:\n    toc-depth: 4\n    toc-expand: true\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n1.1 Overview\n\nThis is In-class_Learning,\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, raster, spatstat, tidyverse, sparr, tmap)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, tidyverse, dplyr, lubridate, httr, tmap,purrr)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(sf, tidyverse,httr,tmap)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetwd(\"C:/Users/HT Chen/Desktop/ISSS626/ISSS626-wp/Assignment1\")\nfolder_path <- \"data/ACRAInformationonCorporateEntities\"\nfile_list <- list.files(path = folder_path,\n                        pattern = \"^ACRA*.*\\\\.csv$\",\n                        full.names =TRUE)\nacra_data <- file_list %>%\n  map_dfr(read_csv)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsetwd(\"C:/Users/HT Chen/Desktop/ISSS626/ISSS626-wp/Assignment1\")\nwrite_rds(acra_data,\n          \"data/acra_data.rds\")\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbiz_56111 <- acra_data %>%\n  dplyr::select(1:24) %>%\n  filter(primary_ssic_code ==56111) %>%\n  rename(date = registration_incorporation_date) %>%\n  mutate(date = as.Date(date),\n         YEAR = year(date),\n         MONTH_NUM = month(date),\n         MONTH_ABBR = month(date,label = TRUE, abbr = TRUE)) %>%\n  mutate(\n    postal_code = str_pad(postal_code,\n    width = 6, side = \"left\", pad = \"0\")) %>% \n          filter(YEAR == 2025)\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npostcodes <- unique(biz_56111$postal_code)\n\nurl <- \"https://onemap.gov.sg/api/common/elastic/search\"\n\nfound <- data.frame()\nnot_found <- data.frame(postcode = character())\n\nfor (pc in postcodes) {\n  query <- list(\n    searchVal = pc,\n    returnGeom = \"Y\",\n    getAddrDetails = \"y\",\n    pageNum = \"1\")\n  res <- GET (url, query = query) \n  json <- content(res)\n  if (json$found != 0) {\n    df <- as.data.frame(json$results, stringsAsFactors = FALSE) \n    df$input_postcode <- pc \n    found <- bind_rows (found, df)\n} else {\nnot_found <- bind_rows (not_found, data.frame(postcode = pc))\n}}\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbiz_S6111 = biz_56111 %>% \n  left_join(found,\n            by = c('postal_code' = 'POSTAL'))\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbiz_S6111\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 677 × 127\n   uen        issuance_agency_id entity_name              entity_type_descript…¹\n   <chr>      <chr>              <chr>                    <chr>                 \n 1 202501136C ACRA               AL ASHIK PTE. LTD.       Local Company         \n 2 202501329K ACRA               ARASH LEGACY PTE. LTD.   Local Company         \n 3 202502902M ACRA               ADAM'S FAMILY CATERING … Local Company         \n 4 202503682G ACRA               ASWINS VEG RESTAURANT P… Local Company         \n 5 202504143K ACRA               ADIRAI KR BRIYANI PTE. … Local Company         \n 6 202504371R ACRA               AL YASSIN CAFE  (S) PTE… Local Company         \n 7 202504658K ACRA               A|S CULINARY CREATIONS … Local Company         \n 8 202505137W ACRA               AI RYORI GROUP PTE. LTD. Local Company         \n 9 202505408N ACRA               AL-NABAWI CAFE PTE. LTD. Local Company         \n10 202507009Z ACRA               ALICE BOULANGERIE (RCS)… Local Company         \n# ℹ 667 more rows\n# ℹ abbreviated name: ¹​entity_type_description\n# ℹ 123 more variables: business_constitution_description <chr>,\n#   company_type_description <chr>, paf_constitution_description <chr>,\n#   entity_status_description <chr>, date <date>, uen_issue_date <date>,\n#   address_type <chr>, block <chr>, street_name <chr>, level_no <chr>,\n#   unit_no <chr>, building_name <chr>, postal_code <chr>, …\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}